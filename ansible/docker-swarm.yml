---
- name: Provision certificates
  hosts: all
  tasks:
    - file: state=directory path="{{ docker_swarm_certs_dir }}"
    - copy: src=docker-swarm.pem dest="{{ docker_swarm_cert }}"
    - copy: src=docker-swarm-key.pem dest="{{ docker_swarm_cert_key }}"
    - copy: src=docker-swarm-ca.pem dest="{{ docker_swarm_cert_ca }}"

- name: Provision Docker Swarm cluster
  hosts: all
  roles:
    - role: ansible-dockerswarm
